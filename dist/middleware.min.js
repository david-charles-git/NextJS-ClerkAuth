"use strict";exports.__esModule=!0;var server_1=require("@clerk/nextjs/server"),server_2=require("next/server");NextRequest,from;var publicPaths=["/","/signin*","/signup*","/api*","/testing*"],adminRestrictedPaths=["/admin*"],memberRestrictedPaths=["/restricted*"],isPublic=function(r){return publicPaths.find(function(e){return r.match(new RegExp(("^"+e+"$").replace("*$","($|/)")))})},isAdminRestricted=function(r){return adminRestrictedPaths.find(function(e){return r.match(new RegExp(("^"+e+"$").replace("*$","($|/)")))})},isMemberRestricted=function(r){return memberRestrictedPaths.find(function(e){return r.match(new RegExp(("^"+e+"$").replace("*$","($|/)")))})},middleWare=server_1.withClerkMiddleware(function(e){if(isPublic(e.nextUrl.pathname))return server_2.NextResponse.next();var r,t=server_1.getAuth(e),i=t.userId,n=t.orgRole;if(i)return isAdminRestricted(e.nextUrl.pathname)&&"admin"!==n?((r=new URL("/profile/",e.url)).searchParams.set("roleRestricted","admin"),server_2.NextResponse.redirect(r)):!isMemberRestricted(e.nextUrl.pathname)||n?server_2.NextResponse.next():((r=new URL("/profile/",e.url)).searchParams.set("roleRestricted","member"),server_2.NextResponse.redirect(r));var s=new URL("/signin",e.url);return server_2.NextResponse.redirect(s)});exports.default=middleWare,exports.config={matcher:"/((?!_next/image|_next/static|favicon.ico).*)"};
//# sourceMappingURL=middleware.min.js.map
