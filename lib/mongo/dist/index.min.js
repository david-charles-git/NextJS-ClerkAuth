"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectToDatabase=void 0;var _mongodb=require("mongodb"),_process$env=process.env,MONGODB_URI=_process$env.MONGODB_URI,MONGODB_DB_ONE=_process$env.MONGODB_DB_ONE;if(!MONGODB_URI)throw new Error("Please define the MONGODC_URI in .env.local");if(!MONGODB_DB_ONE)throw new Error("Please define the MONGODB_DB  in .env.local");var cachedConnection=global.mongo;cachedConnection=cachedConnection||(global.mongo={conn:null,promise:null});var connectToDatabase=function(){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(cachedConnection.conn)return e.abrupt("return",cachedConnection.conn);e.next=2;break;case 2:if(cachedConnection.promise){e.next=7;break}return n={useNewUrlParser:!0,useUnifiedTopology:!0},e.next=6,regeneratorRuntime.awrap(_mongodb.MongoClient.connect(MONGODB_URI,n).then(function(e){return{client:e,db_one:e.db(MONGODB_DB_ONE)}}));case 6:cachedConnection.promise=e.sent;case 7:return e.next=9,regeneratorRuntime.awrap(cachedConnection.promise);case 9:cachedConnection.conn=e.sent;case 10:case"end":return e.stop()}})};exports.connectToDatabase=connectToDatabase;
//# sourceMappingURL=index.min.js.map
