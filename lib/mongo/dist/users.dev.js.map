{"version":3,"sources":["users.js"],"names":["client","db","users","init","clientPromise","collection","Error","getUsers","find","limit","map","user","_id","toString","toArray","result","error"],"mappings":";;;;;;;AAAA;;;;;;;;;;AAEA,IAAIA,MAAJ;AACA,IAAIC,EAAJ;AACA,IAAIC,KAAJ;;AAEA,SAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA,eACQF,EADR;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,0CAIuBG,YAJvB;;AAAA;AAIQJ,UAAAA,MAJR;AAAA;AAAA,0CAKmBA,MAAM,CAACC,EAAP,EALnB;;AAAA;AAKQA,UAAAA,EALR;AAAA;AAAA,0CAMsBA,EAAE,CAACI,UAAH,CAAc,OAAd,CANtB;;AAAA;AAMQH,UAAAA,KANR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,gBASc,IAAII,KAAJ,CAAU,4CAAV,CATd;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcA,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAoBH,IAAI,EAAxB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD;;AAEO,SAAeI,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,cAEML,KAFN;AAAA;AAAA;AAAA;;AAAA;AAAA,0CAEoBC,IAAI,EAFxB;;AAAA;AAAA;AAAA,0CAIsBD,KAAK,CACrBM,IADgB,CACX,EADW,EAEhBC,KAFgB,CAEV,EAFU,EAGhBC,GAHgB,CAGZ,UAACC,IAAD,EAAU;AAAE,qCAAYA,IAAZ;AAAkBC,cAAAA,GAAG,EAAED,IAAI,CAACC,GAAL,CAASC,QAAT;AAAvB;AAA+C,WAH/C,EAIhBC,OAJgB,EAJtB;;AAAA;AAIOC,UAAAA,MAJP;AAAA,4CAUQ;AAAEb,YAAAA,KAAK,EAAGa;AAAV,WAVR;;AAAA;AAAA;AAAA;AAAA,4CAaQ;AAAEC,YAAAA,KAAK,EAAG;AAAV,WAbR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import clientPromise from \".\";\r\n\r\nvar client;\r\nvar db;\r\nvar users;\r\n\r\nasync function init() {\r\n    if (db) return;\r\n\r\n    try {\r\n        client = await clientPromise;\r\n        db = await client.db();\r\n        users = await db.collection(\"users\");\r\n\r\n    } catch(error) {\r\n        throw new Error(\"Fail to establish a connection to database\");\r\n\r\n    }\r\n}\r\n\r\n(async () => { await init(); })\r\n\r\nexport async function getUsers() {\r\n    try {\r\n        if (!users)  await init();\r\n\r\n        const result = await users\r\n            .find({})\r\n            .limit(10)\r\n            .map((user) => { return { ...user, _id: user._id.toString() }; })\r\n            .toArray();\r\n\r\n        return { users : result }\r\n        \r\n    } catch(error) {\r\n        return { error : \"Failed to fecth data\" + error };\r\n\r\n    }\r\n}"],"file":"users.dev.js"}