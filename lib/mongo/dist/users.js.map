{"version":3,"sources":["users.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sBAA8B;AAE9B,IAAI,MAAY,CAAC;AACjB,IAAI,EAAQ,CAAC;AACb,IAAI,KAAW,CAAC;AAEhB,SAAe,IAAI;;;;;;oBACf,IAAI,EAAE,EAAE;wBAAE,sBAAO;qBAAE;;;;oBAGN,qBAAM,aAAa,EAAA;;oBAA5B,MAAM,GAAG,SAAmB,CAAC;oBACxB,qBAAM,MAAM,CAAC,EAAE,EAAE,EAAA;;oBAAtB,EAAE,GAAG,SAAiB,CAAC;oBACf,qBAAM,EAAE,CAAC,UAAU,CAAC,OAAO,CAAC,EAAA;;oBAApC,KAAK,GAAG,SAA4B,CAAC;;;;oBAGrC,MAAM,IAAI,KAAK,CAAC,4CAA4C,CAAC,CAAC;;;;;CAGrE;AAAA,CAAC;AAEF,CAAC;;;oBACG,qBAAM,IAAI,EAAE,EAAA;;gBAAZ,SAAY,CAAC;;;;KAChB,CAAC,EAAE,CAAC;AAEL,OAAO;AACP,SAAsB,QAAQ;;;;;;;yBAElB,CAAC,KAAK,EAAN,wBAAM;oBAAI,qBAAM,IAAI,EAAE,EAAA;;oBAAZ,SAAY,CAAC;;wBAEN,qBAAM,KAAK;yBAC3B,IAAI,CAAC,EAAE,CAAC;yBACR,KAAK,CAAC,EAAE,CAAC;yBACT,GAAG,CAAC,UAAC,IAAU,IAAO,uBAAM,KAAK,KAAE,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,IAAG,CAAA,CAAC,CAAC,CAAC;yBAClE,OAAO,EAAE,EAAA;;oBAJR,MAAM,GAAS,SAIP;oBAEd,sBAAO,EAAE,KAAK,EAAG,MAAM,EAAE,EAAA;;;oBAGzB,sBAAO,EAAE,KAAK,EAAG,qBAAqB,EAAE,EAAA;;;;;CAG/C;AAhBD,4BAgBC","file":"users.js","sourcesContent":["import clientPromise from \".\";\r\n\r\nvar client : any;\r\nvar db : any;\r\nvar users : any;\r\n\r\nasync function init() {\r\n    if (db) { return; }\r\n\r\n    try {\r\n        client = await clientPromise;\r\n        db = await client.db();\r\n        users = await db.collection(\"users\");\r\n\r\n    } catch(error) {\r\n        throw new Error(\"Failed to establish connection to database\");\r\n\r\n    }\r\n};\r\n\r\n(async () => {\r\n    await init();\r\n})();\r\n\r\n//Users\r\nexport async function getUsers() {\r\n    try {\r\n        if (!users) { await init(); }\r\n\r\n        const result : any = await users\r\n            .find({})\r\n            .limit(20)\r\n            .map((user : any) => { ({ ...users, _id: users._id.toString() }) })\r\n            .toArray();\r\n\r\n        return { users : result }\r\n\r\n    } catch (error) {\r\n        return { error : \"Failed to get Users\" }\r\n        \r\n    }\r\n}"]}